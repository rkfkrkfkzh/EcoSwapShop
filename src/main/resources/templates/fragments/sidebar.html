<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Sidebar</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>
<body>
<div th:fragment="sidebar">
    <div class="sidebar bg-light pt-3 pl-3">
        <h5>카테고리</h5>
        <ul class="list-unstyled">
            <!-- 카테고리를 동적으로 생성하고 바로 표시합니다. -->
            <li th:each="category : ${categories}">
                <a th:href="@{'/categories/' + ${category.id}}">
                    <span th:text="${category.name}"></span>
                </a>
            </li>

            <!-- 카테고리 목록이 비어있을 때의 처리 -->
            <div th:if="${#lists.isEmpty(categories)}">
                <li>카테고리가 없습니다.</li>
            </div>

            <!-- 관리자에게만 보이는 카테고리 관리 링크 -->
            <div th:if="${#authentication.name == 'admin'}">
                <li class="mt-2"><strong>카테고리 관리:</strong></li>
                <!-- 중복된 카테고리 목록 링크가 있으므로 하나를 제거하는 것이 좋을 것 같습니다. -->
                <li><a th:href="@{/categories}">카테고리 목록</a></li>
                <li><a th:href="@{/categories/new}">새 카테고리 추가</a></li>
            </div>
        </ul>
    </div>
</div>
</body>
</html>
